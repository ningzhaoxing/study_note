# 缓存雪崩
指缓存中大量数据在同一时间失效或不可用，导致所有请求都打到数据库，导致数据库压力过大。
原因：
1. 大量数据同时过期
2. redis故障宕机

解决方案：
## 大量数据同时过期
1. 均匀设置过期时间
2. 互斥锁
3. 后台更新缓存

## redis故障宕机
1. 可以进行*熔断降级*。先暂停业务对缓存服务的访问，返回错误。
2. 进行*请求限流*，可以通过滑动窗口等限流策略进行限流。
3. 部署redis集群，防止单个节点宕机导致服务不可用

# 缓存击穿
如果缓存中的某个热点数据过期，此时大量的请求访问该热点数据，无法从缓存中读取，直接访问数据库。

雪崩和击穿的区别：
雪崩指的是同一段时间内，大量数据过期；击穿是指并发查某一条数据。

解决方案：
1. 互斥锁
2. 不给热点数据设置缓存时间，后台异步更新缓存

# 缓存穿透
用户访问的数据既不在缓存中，也不在数据库，导致无法构建缓存数据，就没法服务于后续的请求。
当大量这样的请求到来时，数据库压力骤增。

原因：
1. 业务误操作：缓存和数据库的数据被误删
2. 黑客恶意攻击

解决方案：
1. 非法请求限制：在API入口检查请求参数是否合理，如果是恶意请求则直接返回错误
2. 缓存空值或默认值：当发现缓存穿透现象时，针对查询数据在缓存中设置一个默认值。