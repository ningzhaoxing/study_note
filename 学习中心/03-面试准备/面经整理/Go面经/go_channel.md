# 底层实现
channl其实看起来就是一个队列，在数据结构中队列有很多实现方式，例如使用数组、链表、基于数组的循环队列、以及双栈(输入栈和输出栈)，基于堆实现的优先队列等等。

go语言channel的实现实际上结合了多种数据结构，底层是一个叫`hchan`的结构体。

里面包含了缓冲区、等待队列、锁等数据结构。

如果是一个有缓冲的channel，它的缓冲区实际上是一个基于数组的环形队列，通过取余的方式来保持循环，以及两个指针`recvx`和`sendx`来指向当前需要写入或读入的位置，因为底层是数组进行实现的，入队和出队的时间复杂度为O(1)。

当我们往一个缓冲区满的或者无缓冲区的channel去添加元素时，会把协程添加到这个channel的等待写队列`sendq`中，同样当缓冲区空时或者无缓冲区时，进行读元素，会把协程添加到读消息队列`recvq`中。

当这个`channel`进行读操作的时候，如果写消息协程队列中不为空，就会优先唤醒对应的写队列中等待的协程，如果等待队列为空，则会检查缓冲区是否有元素，如果有则读取元素结束，如果没有则会加入到读消息协程队列；同样进行写操作的时候，如果读等待队列中不为空，会环形对应读队列中等待的协程。

# 项目中的使用场景
## 生产者消费者模式

## 控制协程最大并发数

## 发送任务到协程池

## 事件通知
