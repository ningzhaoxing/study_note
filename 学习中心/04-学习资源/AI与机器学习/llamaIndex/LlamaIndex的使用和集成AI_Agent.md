# LlamaIndex的使用
## 基本概念及使用场景
基本概念：
一个用于在实现**RAG**(检索增强)，构建基于大语言模型的应用程序的开源框架。它具有高效的数据索引和检索功能，帮助开发者将外部数据源与语言模型相结合，从而生成更准确、更具有针对性的输出。

简单来说，LlamaIndex是一个用于将数据（包括个人知识库、文档、网页等）高效组织并存入向量数据库的工具，其核心目的是帮助扩大 AI 大语言模型（LLMs）的上下文窗口，从而提升模型在处理特定任务时的准确性和效率。

> RAG：
> 是一种结合检索和生成的混合方法，旨在通过检索外部知识库中的相关信息来增强语言模型的生成能力 。

## 存储过程
大模型应用在接收到数据后，会对数据进行分块处理(根据固定大小、语义等维度)，然后将分块后的文本块封装成`Node`对象，每个`Node`对象包含文本内容、元数据(如所属文档的索引)以及嵌入向量。

然后使用向量存储工具将分块后的数据存储为向量集合，每个块的的嵌入向量被存储到向量数据库，便于后续的语义搜索。

## 传统Prompt AI Chat的局限
传统通用的基于提示词的AI Chat的局限：
1. 上下文记忆短暂
2. 无法处理私有数据(比如个人笔记库、企业文档、代码库等)
3. 缺乏持续学习能力
## LlamaIndex核心功能
#### 外部知识检索
针对个人笔记、企业文档等非公开数据，LlamaIndex通过以下技术实现高效利用：
- **构建数据索引**
	可以将大量外部数据(如文档、开源项目、数据库等)进行预处理、语义分块并索引化，存储到向量数据库中
- **实时检索**
	每次交给AI生成回答前，会根据用户的提示词，从索引中检索出相关数据。
- **上下文增强**
	将检索到的相关信息作为上下文输入到LLM，从而扩展了模型的记忆范围

#### 持续学习能力
传统LLM需通过微调更新知识，而LlamaIndex采用增量索引降低更新成本：
索引模块支持实时增删文档节点，例如新增企业文档或用户反馈数据时，仅需更新局部索引而非重建全库。

# 集成AI Agent

> AI Agent:
> 由两部分组成，分别是MML和Tool。MML是Agent的大脑，用于理解和分析用户需求，并进行决策。
> Tool是Agent的执行器。提供了功能的具体实现。
> MML通过分析用户任务需求后，决定是否去调用Tool去完成一定的任务。

## 场景举例
维知图谱核心模块
### 项目需求简介
可以通过markdown笔记、录音以及图片等媒介交给应用处理，根据已有的知识库自动构建个性化的知识图谱。

> 比如向应用中投喂关于数据结构队列的实现、go语言channel的底层实现、以及分布式消息队列等知识。
   知识图谱会将这些看似零散的知识点进行自动关联和整合，形成知识图谱、关联分析以及学习方向建议(比如，你该掌握生产者、消费者模式；或点击学习ETCD的Raft如何解决分布式数据一致性)等。

### 解决了什么问题？

省得自己在Notion/语雀里手动整理知识关联，解决“学了一堆却连不起来”的痛点。尤其适合搞全栈的程序员——当你在学前后端/算法/分布式这些不同领域时，它能自动帮你发现“原来这TM是一回事”，顺带告诉你接下去该点哪个技能点。

总的来说，用于构建和深化用户个性化的技能树和知识体系，同时还能对个人的技术水平和努力方向一目了然。
### 实现流程

**流程简述**
1. **数据处理与索引构建**  
    先用预处理模块（OCR/语音转文本）把Markdown、图片、录音统一转成纯文本，通过LlamaIndex切割成保留上下文的文本块（比如保证「Go Channel的底层队列实现」这类关键描述不被截断）。接着用向量索引（类似技术文档搜索引擎）建立结构化存储，这里会提取技术术语的语义特征，形成可快速检索的知识单元。
    
2. **知识提取与图谱生成**  
    当需要生成图谱时，用特定prompt驱动大模型（比如"从下列文本中提取技术概念，并用'概念→关系→概念'的格式输出"），模型会扫描检索到的相关文本块，识别如「队列→被GoChannel使用→协程通信」这类关系。最后将模型输出的关系对转换为知识图谱和学习方向推荐。

**举个具体过程**  
假设你新增一篇「Kafka日志存储设计」的笔记：
- 系统自动检索到历史数据中「环形队列」「Channel缓冲区」相关段落
- 大模型对比新旧内容，发现「Kafka的Partition设计借鉴了队列的FIFO特性」
- 在图谱中新增「Kafka→继承→队列」的关系边，并连接到已有的「操作系统消息队列」节点
- 前端根据图数据变化自动渲染新的连接线，并触发学习建议（比如提示复习「磁盘顺序IO与队列性能的关系」）

在此过程中，生成知识图谱、学习推荐的过程就是大语言模型调用Tool执行器，实现AI Agent。

