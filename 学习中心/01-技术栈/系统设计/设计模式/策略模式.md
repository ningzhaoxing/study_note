# 解析

策略模式是一种定义一系列算法的方法。
所有算法都完成相同的工作，只是其中具体实现不同。可以用相同的方法调用所有的方法，***减少各种算法类和算法类使用者的耦合***。

比如商场促销，通过策略模式定义一系列促销算法的方法，它们只做一件事 - 通过自己的算法策略完成策略模式所定义的方法。

# 代码

`cash_accept_stragety.go`
```go
  
// ICashAcceptor 现金收费  
type ICashAcceptor interface {  
    AcceptCash(money float64) float64  
}  
  
// NormalAcceptCash 普通收费  
type NormalAcceptCash struct {  
}  
  
func NewNormalAcceptCash() *NormalAcceptCash {  
    return &NormalAcceptCash{}  
}  
  
func (nc NormalAcceptCash) AcceptCash(money float64) float64 {  
    return money  
}  
  
// RebateAcceptCash 打折促销收费  
type RebateAcceptCash struct {  
    discount float64  
}  
  
func NewRebateAcceptCash(discount float64) *RebateAcceptCash {  
    return &RebateAcceptCash{discount: discount}  
}  
  
func (rc RebateAcceptCash) AcceptCash(money float64) float64 {  
    return money - money*rc.discount  
}  
  
// ReturnAcceptCash 返利收费  
type ReturnAcceptCash struct {  
    limit, returnCash float64  
}  
  
func NewReturnAcceptCash(limit, returnCash float64) *ReturnAcceptCash {  
    return &ReturnAcceptCash{limit, returnCash}  
}  
  
func (rc ReturnAcceptCash) AcceptCash(money float64) float64 {  
    return money / rc.limit * rc.returnCash  
}
```


`stragety.go`

```go
  
type CashAcceptType string  
  
const (  
    NormalCashAccept        CashAcceptType = "normal"  
    Limit300Return100Accept CashAcceptType = "limit300_return100_accpet"  
    Discount8               CashAcceptType = "discount8"  
)  
  
type CashContext struct {  
    promotionStrategy ICashAcceptor  
}  
  
func NewCashContext(acceptType CashAcceptType) *CashContext {  
    cashContext := &CashContext{nil}  
    switch acceptType {  
    case NormalCashAccept:  
       cashContext.promotionStrategy = NewNormalAcceptCash()  
       break  
    case Limit300Return100Accept:  
       cashContext.promotionStrategy = NewReturnAcceptCash(300, 100)  
       break  
    case Discount8:  
       cashContext.promotionStrategy = NewReturnAcceptCash(8, 8)  
       break  
    }  
  
    return cashContext  
}  
  
func (ctx *CashContext) GetResult(money float64) float64 {  
    return ctx.promotionStrategy.AcceptCash(money)  
}
```

