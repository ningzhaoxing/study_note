视图是一种虚拟存在的表。
视图只保存查询的SQL逻辑，不保存查询结果。
# 视图操作
视图操作分为四部分
## 创建
```mysql
# 创建视图
create [or replace] view 视图名称[(列名列表)] as select 语句 [with [cascaded | local] check option];

# 比如
create or replace view stu_v_1 as select id,name from student where id<=10;
```

## 查询
```mysql
# 查询创建视图语句
show create view 视图名称;

# 查看视图数据
select * from 视图名称;
```

## 修改
```mysql
# 方法1
create [or replace] view 视图名称 as select 语句 [with [cascaded | local] check option];

# 方法2
alter view 视图名称 as select 语句;
```

## 删除
```mysql
drop view [if exists] 视图名称;
```

> 注意：insert 操作操作的是原表

# Check检查操作
视图检查操作是指`with [cascaded | local] check option`这部分。
> - 视图的检查操作，可以检查增删改操作是否符合视图的要求。
> - mysql允许基于视图创建视图，它还会检查依赖视图中的规则以保持一致。

为了确定检查范围，mysql提供了两个选项：`cascaded`和`local`，默认值为`cascaded`。

## cascaded操作
```mysql
# cascaded操作不仅为当前视图检查条件，而且为当前视图的之前视图检查条件

# 没有设置check
create view table_view1 as select id,age from table where age>20;

# 视图view2依赖view1，并设置cascaded检查条件
create view table_view2 as select id,age from table where age<25 with cascaded check option;

# 这时，添加的数据不仅要满足当前条件age>25，并且需要满足上一条件age>20
insert into table_view2 values (1,23);
```

## local操作
```mysql
# local操作只为当前视图检查条件，不为之前的视图设置条件。但仍然会递归查询所依赖的视图，若有条件则进行检查，若没有则不检查

# 没有设置check
create view table_view1 as select id,age from table where age>20;

# 视图view2依赖view1，并设置local检查条件
create view table_view2 as select id,age from table where age<25 with local check option;

# 这时，只需要满足age<25的条件即可
insert into table_view2 values (1,10)
```

# 更新
要使视图可更新，视图中的行与基本表中的行之间必须存在**一对一**关系。
如果视图包含以下任意一项，则不可更新：
- 聚合函数或窗口函数(sum()、min()、max()、count()等)
- distinct
- group by
- having
- union 或 union all

# 作用
视图四大作用
1. 简单
	1. 视图不仅可以简化用户对数据的理解，也可以简化操作
	2. 哪些被经常使用的查询可以被定义为视图，可以使得用户不必为以后的操作每次指定全部条件
2. 安全
	1. 数据库可以授权，但不能授权到数据库特定行和特定列上。通过视图用户只能查询和修改他们所能见到的数据
3. 数据独立
	1. 视图可以帮助用户屏蔽真实表结构变化带来的影响
4. 数据联合显示
	1. 可用于联合多表的数据展现在一起，方便阅读使用

