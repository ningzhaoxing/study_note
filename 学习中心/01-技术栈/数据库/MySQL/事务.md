
# mvcc 哪些记录是可见的

1. 正在活跃的事务
	1. 在活跃事务id分为内，且在活跃事务列表中
	2. readview 生成之后开始的事务
2. 自己修改的记录（如果当前记录的 trx_id 是当前事务id，也是可见的） -- 导致了幻读


# mvcc 无法解决的幻读场景

1. 事务A 第一次读，然后事务B 插入一条数据1，然后事务A 更新了数据1，此时事务A 再查数据1 就查到了。
	本质原因是，事务A update 的时候是当前读，且 update 后该记录trx_id 变为当前事务id

2. 事务A 先快照读，事务B 插入一条数据，然后事务A 使用当前读 `... for update`