# 领域层
## 接口定义
```go
type MCPServerRepo interface {
		GetAllServers(ctx context.Context, page, size uint) ([]*MCPServer, *domainerr.Error)
		GetCompaniesSelfServers(ctx context.Context, page, size uint) ([]*MCPServer, *domainerr.Error)
}
```

# 仓储层
## 接口实现

```go
func (m *mcpServerRepo) GetAllServers(ctx context.Context, page, size uint) ([]*MCPServer, *domainerr.Error) {
	var servers []*MCPServer

	if err := m.Model(&MCPServer{}).
		Order("scope = 'official' DESC"),
		Order("scope")
		Order("created_at DESC").
		Offset((int)((page-1)*size)).Limit((int)size).
		Find(&servers).Error; err != nil {
			return nil, err
		}
	return servers, nil	
}

func (m *mcpServerRepo) GetCompaniesSelfServers(ctx context.Context, page, size uint) ([]*MCPServer, *domainerr.Error) {
	var servers []*MCPServer

	if err := m.Model(&MCPServer{}).
		Where("scope = ?", "custom").
		Order("created_at DESC").
		Offset((int)((page-1)*size)).Limit((int)size).
		Find(&servers).Error; err != nil {
			return nil, err
		}
	return servers, nil	
}
```

# 应用层

## 实现流程

1. 用户身份校验
	1. 已登陆用户：查询所有服务 `GetAllServers()`
	2. 未登陆用户：仅查询企业自建服务 `GetCompaniesSelfServers()`
2. 返回响应


# 接口定义

Path: /mcp/webapi/mcp_servers
Method: GET
Requst: 
```json
{
	"page": 1,
	"size": 2,
}
```

Response:
```json
{
	"code": 0,
	"data": {
		"servers": [
			{
			...
			},
			{
			...
			}
		],
		"publishedAt": xxxx,
	}
}
```
